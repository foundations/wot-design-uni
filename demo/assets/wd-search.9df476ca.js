import{g as e,m as a,h as l,z as s,v as c,C as u,b as t,a as o}from"./page-wraper.7cfd0783.js";import{d as n,r,q as d,m as i,v as h,h as v,j as f,o as p,c as m,w as _,a as x,z as w,x as g,u as b,b as y,t as C,p as k,n as V,g as z,i as S,X as $}from"./index-bc8b5b89.js";import{u as j}from"./useTranslate.670742f3.js";const L=o(n({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,modelValue:a(""),useSuffixSlot:l(!1),placeholder:String,cancelTxt:String,light:l(!1),hideCancel:l(!1),disabled:l(!1),maxlength:s(-1),placeholderLeft:l(!1),focus:l(!1),focusWhenClear:l(!1)},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:a}){const l=e,{translate:s}=j("search"),o=r(!1),n=r(!1),L=r(""),I=r(!0),T=r(!1);d((()=>l.modelValue),(e=>{L.value=e,e&&(n.value=!0)}),{immediate:!0}),d((()=>l.focus),(e=>{if(e){if(l.disabled)return;F()}})),i((()=>{l.focus&&F()}));const W=h((()=>`wd-search  ${l.light?"is-light":""}  ${l.hideCancel?"is-without-cancel":""} ${l.customClass}`)),q=h((()=>{const e={display:""===L.value&&I.value?"flex":"none"};return c(e)}));function B(e){n.value=e,u((()=>{o.value=e}))}function F(){l.disabled||u().then((()=>u())).then((()=>u())).then((()=>{I.value=!1,B(!0)}))}function G(e){L.value=e.detail.value,a("update:modelValue",e.detail.value),a("change",{value:e.detail.value})}function H(){L.value="",T.value=!0,l.focusWhenClear&&(o.value=!1),u().then((()=>u())).then((()=>u())).then((()=>{l.focusWhenClear?(I.value=!1,B(!0)):(I.value=!0,B(!1)),a("change",{value:""}),a("update:modelValue",""),a("clear")}))}function U({detail:{value:e}}){a("search",{value:e})}function X(){T.value?T.value=!1:(I.value=!1,a("focus",{value:L.value}))}function A(){T.value||(I.value=!L.value,n.value=!I.value,o.value=!1,a("blur",{value:L.value}))}function D(){a("cancel",{value:L.value})}return(e,a)=>{const l=v(f("wd-icon"),t),c=z,u=S,r=$;return p(),m(u,{class:V(b(W)),style:g(e.customStyle)},{default:_((()=>[x(u,{class:"wd-search__block"},{default:_((()=>[w(e.$slots,"prefix",{},void 0,!0),x(u,{class:"wd-search__field"},{default:_((()=>[e.placeholderLeft?k("",!0):(p(),m(u,{key:0,style:g(b(q)),class:"wd-search__cover",onClick:F},{default:_((()=>[x(l,{name:"search",size:"18px","custom-class":"wd-search__search-icon"}),x(c,{class:"wd-search__placeholder-txt"},{default:_((()=>[y(C(e.placeholder||b(s)("search")),1)])),_:1})])),_:1},8,["style"])),n.value||L.value||e.placeholderLeft?(p(),m(l,{key:1,name:"search",size:"18px","custom-class":"wd-search__search-left-icon"})):k("",!0),n.value||L.value||e.placeholderLeft?(p(),m(r,{key:2,placeholder:e.placeholder||b(s)("search"),"placeholder-class":"wd-search__placeholder-txt","confirm-type":"search",modelValue:L.value,"onUpdate:modelValue":a[0]||(a[0]=e=>L.value=e),class:"wd-search__input",onFocus:X,onInput:G,onBlur:A,onConfirm:U,disabled:e.disabled,maxlength:e.maxlength,focus:o.value},null,8,["placeholder","modelValue","disabled","maxlength","focus"])):k("",!0),L.value?(p(),m(l,{key:3,"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill",size:"16px",onClick:H})):k("",!0)])),_:1})])),_:3}),e.hideCancel?k("",!0):w(e.$slots,"suffix",{key:0},(()=>[x(u,{class:"wd-search__cancel",onClick:D},{default:_((()=>[y(C(e.cancelTxt||b(s)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-14be64c6"]]);export{L as _};
