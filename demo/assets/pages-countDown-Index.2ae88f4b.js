import{Y as e,o as s,g as t,A as a,h as o,m as l,a as n,c as i,d as r,_ as c}from"./page-wraper.7cfd0783.js";import{r as u,v as m,Z as d,d as f,q as p,o as h,c as v,w,z as S,u as _,e as g,F as H,b as k,t as y,n as b,x,i as D,a as M,a8 as j,h as F,j as I}from"./index-bc8b5b89.js";import{_ as C}from"./demo-block.cc9b58b1.js";import{_ as A,a as q}from"./wd-grid.94bbce4f.js";import"./wd-badge.ffec3106.js";import"./useChildren.f02a69c0.js";const $=1e3,z=60*$,G=60*z,N=24*G;function O(e){return requestAnimationFrame(e)}function Y(e){let t,a,o=null;const l=u(e.time),n=m((()=>{return{total:e=l.value,days:Math.floor(e/N),hours:Math.floor(e%N/G),minutes:Math.floor(e%G/z),seconds:Math.floor(e%z/$),milliseconds:Math.floor(e%$)};var e})),i=()=>{a=!1,cancelAnimationFrame(o)},r=()=>Math.max(t-Date.now(),0),c=t=>{l.value=t,s(e.onChange)&&e.onChange(n.value),0===t&&(i(),s(e.onFinish)&&e.onFinish())},f=()=>{o=O((()=>{a&&(c(r()),l.value>0&&f())}))},p=()=>{o=O((()=>{if(a){const t=r();e=t,s=l.value,(Math.floor(e/1e3)!==Math.floor(s/1e3)||0===t)&&c(t),l.value>0&&p()}var e,s}))};return d(i),{start:()=>{a||(t=Date.now()+l.value,a=!0,e.millisecond?f():p())},pause:i,reset:(s=e.time)=>{i(),l.value=s},current:n}}const Z=n(f({name:"wd-count-down",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...t,time:a(Number),millisecond:o(!1),format:l("HH:mm:ss"),autoStart:o(!0)},emits:["change","finish"],setup(s,{expose:t,emit:a}){const o=s,{start:l,pause:n,reset:i,current:r}=Y({time:o.time,millisecond:o.millisecond,onChange:e=>a("change",e),onFinish:()=>a("finish")}),c=m((()=>function(s,t){const{days:a}=t;let{hours:o,minutes:l,seconds:n,milliseconds:i}=t;if(s.includes("DD")?s=s.replace("DD",e(a)):o+=24*a,s.includes("HH")?s=s.replace("HH",e(o)):l+=60*o,s.includes("mm")?s=s.replace("mm",e(l)):n+=60*l,s.includes("ss")?s=s.replace("ss",e(n)):i+=1e3*n,s.includes("S")){const t=e(i,3);s=s.includes("SSS")?s.replace("SSS",t):s.includes("SS")?s.replace("SS",t.slice(0,2)):s.replace("S",t.charAt(0))}return s}(o.format,r.value))),u=()=>{i(o.time),o.autoStart&&l()};return p((()=>o.time),u,{immediate:!0}),t({start:l,pause:n,reset:u}),(e,s)=>{const t=D;return h(),v(t,{class:b(`wd-count-down ${e.customClass}`),style:x(e.customStyle)},{default:w((()=>[e.$slots.default?S(e.$slots,"default",{key:0,current:_(r)},void 0,!0):(h(),g(H,{key:1},[k(y(_(c)),1)],64))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-9d337e25"]]),B=n(f({__name:"Index",setup(e){const{show:s}=i(),t=u(108e6),a=u(null),o=()=>{a.value.start()},l=()=>{a.value.pause()},n=()=>{a.value.reset()},m=()=>s("倒计时结束");return(e,s)=>{const i=F(I("wd-toast"),r),u=F(I("wd-count-down"),Z),d=F(I("demo-block"),C),f=F(I("wd-grid-item"),A),p=F(I("wd-grid"),q),S=F(I("page-wraper"),c);return h(),v(S,null,{default:w((()=>[M(i),M(d,{title:"基本用法"},{default:w((()=>[M(u,{time:t.value},null,8,["time"])])),_:1}),M(d,{title:"自定义格式"},{default:w((()=>[M(u,{time:t.value,format:"DD 天 HH 时 mm 分 ss 秒"},null,8,["time"])])),_:1}),M(d,{title:"毫秒级渲染"},{default:w((()=>[M(u,{time:t.value,millisecond:"",format:"HH:mm:ss:SS"},null,8,["time"])])),_:1}),M(d,{title:"自定义样式"},{default:w((()=>[M(u,{time:t.value},{default:w((({current:e})=>[j("span",{class:"custom-count-down"},y(e.hours),1),j("span",{class:"custom-count-down-colon"},":"),j("span",{class:"custom-count-down"},y(e.minutes),1),j("span",{class:"custom-count-down-colon"},":"),j("span",{class:"custom-count-down"},y(e.seconds),1)])),_:1},8,["time"])])),_:1}),M(d,{title:"手动控制"},{default:w((()=>[M(u,{ref_key:"countDown",ref:a,time:3e3,millisecond:"","auto-start":!1,format:"ss:SSS",onFinish:m},null,512),M(p,{clickable:"",border:""},{default:w((()=>[M(f,{text:"开始",icon:"play-circle-stroke",onItemclick:o}),M(f,{text:"暂停",icon:"pause-circle",onItemclick:l}),M(f,{text:"重置",icon:"refresh",onItemclick:n})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-aa320b6d"]]);export{B as default};
