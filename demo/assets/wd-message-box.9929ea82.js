import{r as e,O as a,d as l,v as t,P as o,q as s,h as u,j as n,o as r,c as i,w as c,a as d,n as p,u as m,b as v,t as f,p as _,e as w,F as y,z as g,i as x}from"./index-bc8b5b89.js";import{_ as b}from"./wd-input.c80fd337.js";import{_ as h}from"./wd-button.1dd168ec.js";import{J as k,g as C,h as z,r as V,o as B,a as j}from"./page-wraper.7cfd0783.js";import{u as E}from"./useTranslate.670742f3.js";const I="__MESSAGE_OPTION__",S={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",inputValidate:null,showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function T(l=""){const t=e(S);a(l?I+l:I,t);const o=e=>a=>{const l=k({type:e},"string"==typeof a?{title:a}:a);return"confirm"===l.type||"prompt"===l.type?l.showCancelButton=!0:l.showCancelButton=!1,s(l)},s=e=>new Promise(((a,l)=>{const o=k(S,"string"==typeof e?{title:e}:e);t.value=k(o,{show:!0,onConfirm:e=>{a(e)},onCancel:e=>{l(e)}})})),u=o("alert"),n=o("confirm"),r=o("prompt");return{show:s,alert:u,confirm:n,prompt:r,close:()=>{t.value={...S}}}}const O=j(l({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...C,useSlot:z(!1),selector:String},setup(a){const l=a,{translate:k}=E("message-box"),C=t((()=>`wd-message-box__container ${l.customClass}`)),z=t((()=>`wd-message-box__body ${G.value?"":"is-no-title"} ${"prompt"===A.value?"is-prompt":""}`)),j=l.selector?I+l.selector:I,T=o(j,e(S)),O=e("");let P=null,M=null;const $=e(!1),G=e(""),N=e(!1),R=e(!0),U=e(""),q=e(""),A=e("alert"),F=e("text"),H=e(""),J=e(""),D=e();let K=null;const L=e(""),Q=e(!1),W=e(99),X=e(!0);function Y(e){if(("modal"!==e||R.value)&&("prompt"!==A.value||"confirm"!==e||function(){if(D.value&&!D.value.test(String(H.value)))return Q.value=!0,!1;if("function"==typeof K){if(!K(H.value))return Q.value=!0,!1}return Q.value=!1,!0}()))switch($.value=!1,e){case"confirm":P&&P({action:e,value:H.value});break;case"cancel":M&&M({action:e});break;default:M&&M({action:"modal"})}}function Z(e){""!==e?H.value=e:Q.value=!1}return s((()=>T.value),(e=>{var a;(a=e)&&(G.value=B(a.title)?a.title:"",N.value=!!B(a.showCancelButton)&&a.showCancelButton,$.value=a.show,R.value=a.closeOnClickModal,U.value=a.confirmButtonText,q.value=a.cancelButtonText,O.value=a.msg,A.value=a.type,F.value=a.inputType,H.value=a.inputValue,J.value=a.inputPlaceholder,D.value=a.inputPattern,K=a.inputValidate,P=a.onConfirm,M=a.onCancel,L.value=a.inputError,Q.value=a.showErr,W.value=a.zIndex,X.value=a.lazyRender)}),{deep:!0,immediate:!0}),s((()=>$.value),(e=>{!1===e&&(Q.value=!1)}),{deep:!0,immediate:!0}),(e,a)=>{const l=x,t=u(n("wd-input"),b),o=u(n("wd-button"),h),s=u(n("wd-popup"),V);return r(),i(l,null,{default:c((()=>[d(s,{transition:"zoom-in",modelValue:$.value,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value=e),"close-on-click-modal":R.value,"lazy-render":X.value,"custom-class":"wd-message-box",onClickModal:a[4]||(a[4]=e=>Y("modal")),"z-index":W.value,duration:200},{default:c((()=>[d(l,{class:p(m(C))},{default:c((()=>[d(l,{class:p(m(z))},{default:c((()=>[G.value?(r(),i(l,{key:0,class:"wd-message-box__title"},{default:c((()=>[v(f(G.value),1)])),_:1})):_("",!0),d(l,{class:"wd-message-box__content"},{default:c((()=>["prompt"===A.value?(r(),w(y,{key:0},[d(t,{modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),type:F.value,size:"large",placeholder:J.value||"请输入",onInput:Z},null,8,["modelValue","type","placeholder"]),Q.value?(r(),i(l,{key:0,class:"wd-message-box__input-error"},{default:c((()=>[v(f(L.value||m(k)("inputNoValidate")),1)])),_:1})):_("",!0)],64)):_("",!0),e.useSlot?g(e.$slots,"default",{key:1},void 0,!0):(r(),w(y,{key:2},[v(f(O.value),1)],64))])),_:3})])),_:3},8,["class"]),d(l,{class:p("wd-message-box__actions "+(N.value?"wd-message-box__flex":"wd-message-box__block"))},{default:c((()=>[N.value?(r(),i(o,{key:0,type:"info",block:"","custom-style":"margin-right: 16px;",onClick:a[1]||(a[1]=e=>Y("cancel"))},{default:c((()=>[v(f(q.value||m(k)("cancel")),1)])),_:1})):_("",!0),d(o,{block:"",onClick:a[2]||(a[2]=e=>Y("confirm"))},{default:c((()=>[v(f(U.value||m(k)("confirm")),1)])),_:1})])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])])),_:3})}}}),[["__scopeId","data-v-88651a8e"]]);export{O as _,T as u};
