import{d as e,r as t,v as a,q as l,N as s,h as i,j as o,o as n,c as r,w as d,z as u,a as c,u as p,e as f,F as x,f as v,b as w,t as b,p as y,n as _,x as h,a6 as m,i as g,a7 as k,y as $,a8 as j}from"./index-bc8b5b89.js";import{g as z,m as C,h as S,i as I,b as A,k as T,a as D,_ as N}from"./page-wraper.7cfd0783.js";import{_ as q}from"./demo-block.cc9b58b1.js";const F=D(e({name:"wd-notice-bar",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...z,text:{type:[String,Array],default:""},type:C("warning"),scrollable:S(!0),delay:I(1),speed:I(50),closable:S(!1),wrapable:S(!1),prefix:String,color:String,backgroundColor:String,direction:C("horizontal")},emits:["close","next"],setup(e,{emit:j}){const z=e,C=".wd-notice-bar__wrap",S=".wd-notice-bar__content",I=t(0),D=t(!0),N=t(""),q=t(""),F=t(0),G=a((()=>Array.isArray(z.text)?z.text:[z.text])),H=a((()=>G.value[F.value])),M=t(0),P=a((()=>"horizontal"===z.direction)),V=a((()=>"vertical"===z.direction)),{proxy:X}=$();function Y(){const{type:e,wrapable:t,scrollable:a,direction:l}=z;let s=[];e&&s.push(`is-${e}`),P.value?!t&&!a&&s.push("wd-notice-bar--ellipse"):s.push("wd-notice-bar--ellipse"),t&&!a&&s.push("wd-notice-bar--wrap"),q.value=s.join(" ")}function B(){D.value=!1,j("close")}function E({duration:e,delay:t,translate:a}){const l=k({duration:e,delay:t})[P.value?"translateX":"translateY"](a);return l.step(),l.export()}function J(){return Promise.all([T(C,!1,X),T(S,!1,X)])}async function K(e){const t=-e/(G.value.length+1)*(F.value+1);N.value=E({duration:1e3*z.speed,delay:1e3*z.delay,translate:t})}function L(){P.value?N.value=E({duration:0,delay:0,translate:I.value+1}):++M.value>=G.value.length&&(M.value=0,N.value=E({duration:0,delay:0,translate:0}));const e=setTimeout((()=>{F.value>=G.value.length-1?F.value=0:F.value++,j("next",F.value),m((async()=>{const[e,t]=await J();t.width&&t.height&&(P.value?N.value=E({duration:(I.value+t.width)/z.speed*1e3,delay:1e3*z.delay,translate:-t.width}):K(t.height))})),clearTimeout(e)}),20)}return l([()=>z.type,()=>z.scrollable,()=>z.wrapable],(()=>{Y()}),{deep:!0,immediate:!0}),l([()=>z.text],(()=>{m((()=>async function(){const[e,t]=await J();if(!e.width||!t.width||!t.height)return;I.value=e.width,P.value?z.scrollable&&(N.value=E({duration:t.width/z.speed*1e3,delay:1e3*z.delay,translate:-t.width})):G.value.length>1&&K(t.height)}()))}),{deep:!0,immediate:!0}),s((()=>{Y()})),(e,t)=>{const a=i(o("wd-icon"),A),l=g;return D.value?(n(),r(l,{key:0,class:_(`wd-notice-bar ${e.customClass} ${q.value}`),style:h(`color: ${e.color}; background: ${e.backgroundColor};${e.customStyle}`)},{default:d((()=>[e.prefix?(n(),r(a,{key:0,"custom-class":"wd-notice-bar__prefix",size:"18px",name:e.prefix},null,8,["name"])):u(e.$slots,"prefix",{key:1},void 0,!0),c(l,{class:"wd-notice-bar__wrap"},{default:d((()=>[c(l,{class:"wd-notice-bar__content",animation:N.value,onTransitionend:L},{default:d((()=>[p(V)?(n(),f(x,{key:0},[(n(!0),f(x,null,v(p(G),((t,a)=>u(e.$slots,"vertical",{key:t,item:t,index:a},(()=>[c(l,null,{default:d((()=>[w(b(t),1)])),_:2},1024)]),!0))),128)),p(G).length>1?u(e.$slots,"vertical",{key:0,item:p(G)[0],index:0},(()=>[c(l,null,{default:d((()=>[w(b(p(G)[0]),1)])),_:1})]),!0):y("",!0)],64)):u(e.$slots,"default",{key:1},(()=>[w(b(p(H)),1)]),!0)])),_:3},8,["animation"])])),_:3}),e.closable?(n(),r(a,{key:2,"custom-class":"wd-notice-bar__suffix",size:"18px",name:"close-bold",onClick:B})):u(e.$slots,"suffix",{key:3},void 0,!0)])),_:3},8,["class","style"])):y("",!0)}}}),[["__scopeId","data-v-42e229ad"]]),G=D(e({__name:"Index",setup(e){const a=t(["欢迎使用wot design uni","该组件库基于uniapp ->Vue3, ts构建","项目地址：https://github.com/Moonofweisheng/wot-design-uni","我们的目标是打造最强uniapp组件库","诚挚邀请大家共同建设","这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息"]),l=e=>{console.log("展示下一条，index: ",e),console.log("文本是："+a.value[e])};return(e,t)=>{const s=i(o("wd-notice-bar"),F),u=i(o("demo-block"),q),p=i(o("wd-icon"),A),f=g,x=i(o("page-wraper"),N);return n(),r(x,null,{default:d((()=>[c(u,{title:"基本用法"},{default:d((()=>[c(s,{text:"这是一条消息提示信息这是一条消息提示信息这是一条消息提示信息",prefix:"warn-bold"})])),_:1}),c(u,{title:"类型修改"},{default:d((()=>[c(s,{type:"danger",text:"当前网络不可用，请检查你的网络设置。当前网络不可用，请检查你的网络设置。",prefix:"wifi-error","custom-class":"space"}),c(s,{type:"info",text:"pc-win沃特已登录，可在“设备管理”中查看详情。pc-win沃特已登录，可在“设备管理”中查看详情。",prefix:"check-outline"})])),_:1}),c(u,{title:"禁止滚动"},{default:d((()=>[c(s,{scrollable:!1,text:"通知被禁或时段内消息屏蔽可能造成消…",prefix:"warn-bold"})])),_:1}),c(u,{title:"插槽"},{default:d((()=>[c(s,{scrollable:!1},{prefix:d((()=>[c(p,{"custom-class":"prefix",name:"warn-bold"},{default:d((()=>[w("占位符")])),_:1})])),suffix:d((()=>[j("div",{style:{color:"#4d80f0"}},"查看")])),default:d((()=>[w(" 通知被禁或时段内消息屏蔽可能造成消… ")])),_:1})])),_:1}),c(u,{title:"可关闭的"},{default:d((()=>[c(s,{text:"挂起后，电脑与手机均不会有新客户接入。挂起后，电脑与手机均不会有新客户接入。",closable:"",prefix:"warn-bold"})])),_:1}),c(u,{title:"多行展示"},{default:d((()=>[c(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",wrapable:"",scrollable:!1})])),_:1}),c(u,{title:"自定义颜色"},{default:d((()=>[c(s,{text:"这是一条消息提示信息，这是一条消息提示信息，这是一条消息提示信息",prefix:"check-outline",color:"#34D19D","background-color":"#f0f9eb"})])),_:1}),c(u,{title:"多文本轮播"},{default:d((()=>[c(s,{text:a.value,prefix:"check-outline",onNext:l},null,8,["text"])])),_:1}),c(u,{title:"垂直滚动"},{default:d((()=>[c(s,{prefix:"warn-bold",direction:"vertical",text:a.value,speed:.5,delay:3,"custom-class":"space"},null,8,["text","speed"]),c(s,{prefix:"warn-bold",direction:"vertical",text:"只有一条消息不会滚动",speed:.5,delay:3,"custom-class":"space"},null,8,["speed"]),c(s,{prefix:"warn-bold",direction:"vertical",text:a.value,speed:.5,delay:3},{vertical:d((({item:e,index:t})=>[c(f,{style:{"font-weight":"700","text-decoration":"underline"}},{default:d((()=>[w(b(t)+": "+b(e),1)])),_:2},1024)])),_:1},8,["text","speed"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-2939b275"]]);export{G as default};
