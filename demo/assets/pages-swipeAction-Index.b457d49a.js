import{g as e,m as a,h as t,k as l,a as s,c as u,d as o,e as n,_ as c}from"./page-wraper.7cfd0783.js";import{d,P as i,r,q as f,N as _,m as b,Z as p,o as v,c as k,w as m,a as h,x as g,z as w,n as y,T as C,y as $,i as V,b as T,u as j,h as x,j as z}from"./index-bc8b5b89.js";import{p as I,r as Q,q as F,c as M,u as O}from"./clickoutside.5ec67e1b.js";import{u as P}from"./useTouch.ceeba6e2.js";import{_ as q}from"./demo-block.cc9b58b1.js";import{_ as S}from"./wd-button.1dd168ec.js";const D=s(d({name:"wd-swipe-action",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...e,modelValue:a("close"),disabled:t(!1),beforeClose:Function},emits:["click","update:modelValue"],setup(e,{expose:a,emit:t}){const s=e,u=i(F,null),o=r(""),n=r(0),c=r(0),d=r(!1),T=P(),{proxy:j}=$();function x(e,a){s.disabled||z().then((([t,l])=>{switch(e){case"close":if(0===c.value)return;H("value",a);break;case"left":O(t);break;case"right":O(-l)}}))}function z(){return Promise.all([l(".wd-swipe-action__left",!1,j).then((e=>e.width?e.width:0)),l(".wd-swipe-action__right",!1,j).then((e=>e.width?e.width:0))])}function O(e=0){const a=`translate3d(${e}px, 0, 0)`,t=d.value?"none":".6s cubic-bezier(0.18, 0.89, 0.32, 1)";o.value=`\n        -webkit-transform: ${a};\n        -webkit-transition: ${t};\n        transform: ${a};\n        transition: ${t};\n      `,c.value=e}function q(e){s.disabled||0===c.value||(H("click",e=e||"inside"),t("click",{value:e}))}function S(e){s.disabled||(n.value=c.value,T.touchStart(e),u&&u.closeOther?u.closeOther(j):M(j))}function D(e){if(s.disabled)return;if(T.touchMove(e),"vertical"===T.direction.value)return;e.preventDefault(),e.stopPropagation(),d.value=!0;const a=n.value+T.deltaX.value;z().then((([t,l])=>0===t&&a>0||0===l&&a<0?(O(0),S(e)):0!==t&&a>=t?(O(t),S(e)):0!==l&&-a>=l?(O(-l),S(e)):void O(a)))}function G(){if(s.disabled)return;const e=.3;d.value=!1,z().then((([a,l])=>{n.value<0&&c.value<0&&c.value-n.value<l*e?(O(-l),t("update:modelValue","right")):n.value>0&&c.value>0&&n.value-c.value<a*e?(O(a),t("update:modelValue","left")):l>0&&n.value>=0&&c.value<0&&Math.abs(c.value)>l*e?(O(-l),t("update:modelValue","right")):a>0&&n.value<=0&&c.value>0&&Math.abs(c.value)>a*e?(O(a),t("update:modelValue","left")):H("swipe")}))}function H(e,a){if("swipe"===e&&0===n.value)return O(0);"swipe"===e&&n.value>0?a="left":"swipe"===e&&n.value<0&&(a="right"),e&&a&&s.beforeClose&&s.beforeClose(e,a),O(0),"close"!==s.modelValue&&t("update:modelValue","close")}return f((()=>s.modelValue),((e,a)=>{x(e,a)}),{deep:!0}),_((()=>{u&&u.pushToQueue?u.pushToQueue(j):I(j),n.value=0,c.value=0,d.value=!1})),b((()=>{d.value=!0,x(s.modelValue),d.value=!1})),p((()=>{u&&u.removeFromQueue?u.removeFromQueue(j):Q(j)})),a({close:H}),(e,a)=>{const t=V;return v(),k(t,{class:y(`wd-swipe-action ${e.customClass}`),style:g(e.customStyle),onClick:a[2]||(a[2]=C((e=>q()),["stop"])),onTouchstart:S,onTouchmove:D,onTouchend:G,onTouchcancel:G},{default:m((()=>[h(t,{class:"wd-swipe-action__wrapper",style:g(o.value)},{default:m((()=>[h(t,{class:"wd-swipe-action__left",onClick:a[0]||(a[0]=e=>q("left"))},{default:m((()=>[w(e.$slots,"left",{},void 0,!0)])),_:3}),w(e.$slots,"default",{},void 0,!0),h(t,{class:"wd-swipe-action__right",onClick:a[1]||(a[1]=e=>q("right"))},{default:m((()=>[w(e.$slots,"right",{},void 0,!0)])),_:3})])),_:3},8,["style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-fd06492a"]]),G=s(d({__name:"Index",setup(e){const{closeOutside:a}=O(),t=u(),l=r("close"),s=(e,a)=>{"click"===e?t.show(`${e} ${a}导致滑动按钮关闭`):t.show(`${e}导致${a}滑动按钮关闭`)};function d(e){l.value=e}function i({value:e}){t.show(`点击${e}关闭操作按钮`)}function f(e){t.show(`点击了${e}`)}function _(){}return(e,t)=>{const u=x(z("wd-toast"),o),r=x(z("wd-cell"),n),b=V,p=x(z("wd-swipe-action"),D),g=x(z("demo-block"),q),w=x(z("wd-button"),S),y=x(z("page-wraper"),c);return v(),k(y,null,{default:m((()=>[h(u),h(b,{onClick:C(j(a),["stop"])},{default:m((()=>[h(g,{transparent:"",title:"基本用法"},{default:m((()=>[h(p,null,{right:m((()=>[h(b,{class:"action"},{default:m((()=>[h(b,{class:"button",style:{background:"#fa4350"},onClick:t[0]||(t[0]=e=>f("操作1"))},{default:m((()=>[T("操作1")])),_:1}),h(b,{class:"button",style:{background:"#f0883a"},onClick:t[1]||(t[1]=e=>f("操作2"))},{default:m((()=>[T("操作2")])),_:1}),h(b,{class:"button",style:{background:"#4d80f0"},onClick:t[2]||(t[2]=e=>f("操作3"))},{default:m((()=>[T("操作3")])),_:1})])),_:1})])),default:m((()=>[h(r,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),h(g,{transparent:"",title:"左右滑动"},{default:m((()=>[h(p,null,{left:m((()=>[h(b,{class:"action"},{default:m((()=>[h(b,{class:"button",style:{background:"#fa4350"}},{default:m((()=>[T("操作1")])),_:1}),h(b,{class:"button",style:{background:"#f0883a"}},{default:m((()=>[T("操作2")])),_:1}),h(b,{class:"button",style:{background:"#4d80f0"}},{default:m((()=>[T("操作3")])),_:1})])),_:1})])),right:m((()=>[h(b,{class:"action"},{default:m((()=>[h(b,{class:"button",style:{background:"#fa4350"}},{default:m((()=>[T("操作4")])),_:1}),h(b,{class:"button",style:{background:"#f0883a"}},{default:m((()=>[T("操作5")])),_:1}),h(b,{class:"button",style:{background:"#4d80f0"}},{default:m((()=>[T("操作6")])),_:1})])),_:1})])),default:m((()=>[h(r,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),h(g,{transparent:"",title:"切换按钮"},{default:m((()=>[h(p,{modelValue:l.value,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value=e),"before-close":s},{left:m((()=>[h(b,{class:"action"},{default:m((()=>[h(b,{class:"button",style:{background:"#fa4350"}},{default:m((()=>[T("操作1")])),_:1}),h(b,{class:"button",style:{background:"#f0883a"}},{default:m((()=>[T("操作2")])),_:1}),h(b,{class:"button",style:{background:"#4d80f0"}},{default:m((()=>[T("操作3")])),_:1})])),_:1})])),right:m((()=>[h(b,{class:"action"},{default:m((()=>[h(b,{class:"button",style:{background:"#fa4350"}},{default:m((()=>[T("操作4")])),_:1}),h(b,{class:"button",style:{background:"#f0883a"}},{default:m((()=>[T("操作5")])),_:1}),h(b,{class:"button",style:{background:"#4d80f0"}},{default:m((()=>[T("操作6")])),_:1})])),_:1})])),default:m((()=>[h(r,{title:"标题文字",value:"内容"})])),_:1},8,["modelValue"])])),_:1}),h(b,{class:"button-group"},{default:m((()=>[h(b,{onClick:C(_,["stop"])},{default:m((()=>[h(w,{size:"small",onClick:t[4]||(t[4]=e=>d("left"))},{default:m((()=>[T("打开左边")])),_:1})])),_:1},8,["onClick"]),h(b,{onClick:C(_,["stop"])},{default:m((()=>[h(w,{size:"small",onClick:t[5]||(t[5]=e=>d("close"))},{default:m((()=>[T("关闭所有")])),_:1})])),_:1},8,["onClick"]),h(b,{onClick:C(_,["stop"])},{default:m((()=>[h(w,{size:"small",onClick:t[6]||(t[6]=e=>d("right"))},{default:m((()=>[T("打开右边")])),_:1})])),_:1},8,["onClick"])])),_:1}),h(g,{transparent:"",title:"点击事件"},{default:m((()=>[h(p,{onClick:i},{right:m((()=>[h(b,{class:"action"},{default:m((()=>[h(b,{class:"button",style:{background:"#fa4350"}},{default:m((()=>[T("操作1")])),_:1}),h(b,{class:"button",style:{background:"#f0883a"}},{default:m((()=>[T("操作2")])),_:1}),h(b,{class:"button",style:{background:"#4d80f0"}},{default:m((()=>[T("操作3")])),_:1})])),_:1})])),default:m((()=>[h(r,{title:"标题文字",value:"内容"})])),_:1})])),_:1}),h(g,{transparent:"",title:"禁用滑动按钮"},{default:m((()=>[h(p,{disabled:""},{right:m((()=>[h(b,{class:"action"},{default:m((()=>[h(b,{class:"button",style:{background:"#fa4350"}},{default:m((()=>[T("操作1")])),_:1}),h(b,{class:"button",style:{background:"#f0883a"}},{default:m((()=>[T("操作2")])),_:1}),h(b,{class:"button",style:{background:"#4d80f0"}},{default:m((()=>[T("操作3")])),_:1})])),_:1})])),default:m((()=>[h(r,{title:"标题文字",value:"内容"})])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})}}}),[["__scopeId","data-v-cbf249d3"]]);export{G as default};
