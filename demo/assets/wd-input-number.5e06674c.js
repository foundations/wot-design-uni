import{g as e,A as a,G as s,i as t,h as i,z as u,m as n,b as l,O as o,o as d,a as r}from"./page-wraper.7cfd0783.js";import{d as c,r as p,q as m,h as b,j as f,o as v,c as h,w,a as _,n as N,T as x,x as y,p as M,i as I,X as g}from"./index-bc8b5b89.js";const V=r(c({name:"wd-input-number",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,modelValue:a(s),min:t(1),max:t(Number.MAX_SAFE_INTEGER),step:t(1),stepStrictly:i(!1),precision:t(0),disabled:i(!1),disableInput:i(!1),disableMinus:i(!1),disablePlus:i(!1),withoutInput:i(!1),inputWidth:u(36),allowNull:i(!1),placeholder:n("")},emits:["focus","blur","change","update:modelValue"],setup(e,{emit:a}){const s=e,t=p(!1),i=p(!1),u=p("");function n(e){const{disabled:a,min:u,max:n,step:l}=s;t.value=a||Number(e)<=u||S(e,-l)<u,i.value=a||Number(e)>=n||S(e,l)>n}function r(e){return Number(parseFloat(""+Math.round(e*Math.pow(10,s.precision))/Math.pow(10,s.precision)).toFixed(s.precision))}function c(e){const a=function(e){if(void 0===e)return 0;const a=e.toString(),s=a.indexOf(".");let t=0;return-1!==s&&(t=a.length-s-1),t}(s.step),t=Math.pow(10,a);return Math.round(Number(e)/s.step)*t*s.step/t}function V(e,a=!0){!s.allowNull||d(e)&&""!==e?(s.stepStrictly&&(e=c(e)),!e&&0!==e||void 0===s.precision||(e=r(Number(e))),Number(e)>s.max&&(e=r(s.max)),Number(e)<s.min&&(e=r(s.min)),E(e,a)):E(e,a)}function S(e,a){if(e=Number(e),isNaN(e))return s.min;const t=Math.pow(10,s.precision);return r((e*t+a*t)/t)}function C(){if(t.value||s.disableMinus)return;E(S(u.value,-s.step))}function F(){if(i.value||s.disablePlus)return;E(S(u.value,s.step))}function k(e){E(e.detail.value||"")}function j(e){a("focus",e.detail)}function A(){const e=G(u.value);V(e),a("blur",{value:e})}function E(e,s=!0){u.value=e,s&&a("change",{value:e}),s&&a("update:modelValue",u.value)}function G(e){return!s.allowNull||d(e)&&""!==e?(e=Number(e),isNaN(e)&&(e=s.min),s.stepStrictly&&(e=c(e)),void 0!==s.precision&&(e=e.toFixed(s.precision)),Number(e)):""}return m((()=>s.modelValue),(e=>{u.value=e,n(e)}),{immediate:!0,deep:!0}),m([()=>s.max,()=>s.min],(()=>{o((()=>{const e=G(u.value);V(e),n(e)}),30)()}),{immediate:!0,deep:!0}),m((()=>s.disabled),(e=>{t.value=e,i.value=e}),{immediate:!0,deep:!0}),(e,a)=>{const s=b(f("wd-icon"),l),n=I,o=g;return v(),h(n,{class:N(`wd-input-number ${e.customClass} ${e.disabled?"is-disabled":""} ${e.withoutInput?"is-without-input":""}`),style:y(e.customStyle)},{default:w((()=>[_(n,{class:N("wd-input-number__action "+(t.value||e.disableMinus?"is-disabled":"")),onClick:C},{default:w((()=>[_(s,{name:"decrease","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"]),e.withoutInput?M("",!0):(v(),h(n,{key:0,class:"wd-input-number__inner",onClick:a[1]||(a[1]=x((()=>{}),["stop"]))},{default:w((()=>[_(o,{class:"wd-input-number__input",style:y(""+(e.inputWidth?"width: "+e.inputWidth:"")),type:"digit",disabled:e.disabled||e.disableInput,modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),placeholder:e.placeholder,onInput:k,onFocus:j,onBlur:A},null,8,["style","disabled","modelValue","placeholder"]),_(n,{class:"wd-input-number__input-border"})])),_:1})),_(n,{class:N("wd-input-number__action "+(i.value||e.disablePlus?"is-disabled":"")),onClick:F},{default:w((()=>[_(s,{name:"add","custom-class":"wd-input-number__action-icon"})])),_:1},8,["class"])])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-e6ef169e"]]);export{V as _};
